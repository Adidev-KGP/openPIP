{% extends 'base.html.twig' %} {% block stylesheets %} {% stylesheets
'assets/css/bootstrap.min.css' 'assets/css/jquery-ui.min.css'
'bundles/footable/css/footable.core.css'
'bundles/footable/demos/css/footable-demos.css'
'assets/css/jquery.qtip.css' 'bundles/spectrum/spectrum.css'
'assets/css/awesome-bootstrap-checkbox.css' 'assets/css/main.css'
'assets/css/search.css' 'assets/css/search_results.css' %}
<link rel="stylesheet" type="text/css" href="{{ asset_url }}">
{% endstylesheets %}
<link rel='shortcut icon'
	href='{{ asset('assets/images/tor_ibin_icon.ico') }}' />
{% endblock %} {% block title %}{{ short_title }} | Results{% endblock
%} {% block content %}
<header>
	<nav class="navbar navbar-default main_header"
		style="background-color: {{ main_color_scheme }};">
		<svg id="svg2" class="main_logo left "
			xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns="http://www.w3.org/2000/svg" height="40.026" width="69.124"
			version="1.1" xmlns:cc="http://creativecommons.org/ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/">
            <metadata id="metadata7">
              <rdf:RDF>
               <cc:Work rdf:about="">
                <dc:format>image/svg+xml</dc:format>
                <dc:type
						rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
                <dc:title />
               </cc:Work>
              </rdf:RDF>
             </metadata>
             <g id="g3770" stroke-miterlimit="4" stroke-dasharray="none">
              <path id="path2987"
				d="m48.576,17.582c0,9.2489-7.5012,16.746-16.754,16.746-9.2532,0-16.754-7.4977-16.754-16.746,0-9.2489,7.5012-16.746,16.754-16.746,9.2532,0,16.754,7.4977,16.754,16.746z"
				stroke-opacity="0.56084655000000005" class="parent" stroke="#000000"
				stroke-width="0.04307067000000000" fill="#e6e6e6" />
              <path id="path2991-1"
				d="m31.367,23.78c0,2.992-2.4267,5.4175-5.42,5.4175-2.9934,0-5.42-2.4255-5.42-5.4175s2.4267-5.4175,5.42-5.4175c2.9934,0,5.42,2.4255,5.42,5.4175z"
				class="child" stroke="{{ logo_color_scheme }}"
				stroke-width="0.08252774" fill="{{ logo_color_scheme }}" />
              <path id="path2991-7"
				d="m42.899,13.341c0,2.992-2.4267,5.4175-5.42,5.4175-2.9934,0-5.42-2.4255-5.42-5.4175s2.4267-5.4175,5.42-5.4175c2.9934,0,5.42,2.4255,5.42,5.4175z"
				class="child" stroke="{{ logo_color_scheme }}"
				stroke-width="0.08252774" fill="{{ logo_color_scheme }}" />
              <path id="path2991-4"
				d="m67.986,29.163c0,2.992-2.4267,5.4175-5.42,5.4175-2.9934,0-5.42-2.4255-5.42-5.4175s2.4267-5.4175,5.42-5.4175c2.9934,0,5.42,2.4255,5.42,5.4175z"
				class="child" stroke="{{ logo_color_scheme }}"
				stroke-width="0.08252774" fill="{{ logo_color_scheme }}" />
              <path id="path2991-0"
				d="m10.903,34.545c0,2.992-2.4267,5.4175-5.42,5.4175-2.9934,0-5.42-2.4255-5.42-5.4175s2.4267-5.4175,5.42-5.4175c2.9934,0,5.42,2.4255,5.42,5.4175z"
				class="child" stroke="{{ logo_color_scheme }}"
				stroke-width="0.08252774" fill="{{ logo_color_scheme }}" />
              <path id="path3807" stroke-linejoin="miter"
				d="m25.95,23.82-20.47,10.76" class="child"
				stroke="{{ logo_color_scheme }}" stroke-linecap="butt"
				stroke-width="1.07676673" fill="none" />
              <path id="path2991-9-45"
				d="m69.063,5.4793c0,2.992-2.4267,5.4175-5.42,5.4175-2.9934,0-5.42-2.4255-5.42-5.4175s2.4267-5.4175,5.42-5.4175c2.9934,0,5.42,2.4255,5.42,5.4175z"
				class="child" stroke="{{ logo_color_scheme }}"
				stroke-width="0.08252774" fill="{{ logo_color_scheme }}" />
              <path id="path3807-1" stroke-linejoin="miter"
				d="m63.64,5.5195-25.848,7.5356" class="child"
				stroke="{{ logo_color_scheme }}" stroke-linecap="butt"
				stroke-width="1.07676673" fill="none" />
              <path id="path3807-1-5" stroke-linejoin="miter"
				d="m62.56,29.2-24.77-16.15" class="child"
				stroke="{{ logo_color_scheme }}" stroke-linecap="butt"
				stroke-width="1.07676673" fill="none" />
             </g>
        </svg>
		<div style="padding: 12px;">
			<h3 style="color: {{ header_color_scheme }}">
				<strong>{{ title }}</strong>
			</h3>
		</div>
	</nav>
	<nav class="navbar navbar-default">
		<div class="container-fluid">
			<div class="navbar-header tor_ibin_header">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target="#myNavbar">
					<span class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
			</div>
			<div id="myNavbar" class="collapse navbar-collapse">
				{% if login_status == false %}
				<h5 class="nav-header" style="color: {{ main_color_scheme }}">{{
					short_title }}</h5>
				<ul class="nav navbar-nav ">
					<li><a href="{{ path('home') }}">Home</a></li>
					<li class="active"><a href="{{ path('search') }}">Search</a></li>
					<li><a href="{{ path('download') }}">Downloads</a></li>
					<li><a href="{{ path('about') }}">About</a></li>
					<li><a href="{{ path('documentation') }}">Documentation</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a href="{{ path('fos_user_security_login') }}">Login</a></li>
				</ul>
				{% elseif login_status == true %}
				<h5 class="nav-header" style="color: {{ main_color_scheme }}">{{
					short_title }} Admin</h5>
				<ul class="nav navbar-nav ">
					<li><a href="{{ path('admin_home') }}">Home</a></li>
					<li class="active"><a href="{{ path('admin_search') }}">Search</a></li>
					<li><a href="{{ path('admin_download') }}">Downloads</a></li>
					<li><a href="{{ path('admin_about') }}">About</a></li>
					<li><a href="{{ path('admin_documentation') }}">Documentation</a></li>
					<li><a href="{{ path('announcement_manager') }}">Announcements</a></li>
					<li><a href="{{ path('data_manager') }}">Data</a></li>
					<li><a
						href="{{ path('file_manager', {'upload_directory': 'FASTA'}) }}">Files</a></li>
					<li><a href="{{ path('admin_settings') }}">Settings</a></li>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a href="{{ path('user_logout') }}">Logout</a></li>
				</ul>
				{% endif %}
			</div>
		</div>
		<div class="shadow"></div>
	</nav>
</header>
<main>
<div class="se-pre-con"></div>
<div class="row network_row" style="background-color: #EEEEEE;">
	<div class="col-sm-12">
		<div id="summary">
			<div class="col-sm-2">
				<div class="row">
					<h4 style="color: {{ main_color_scheme }}; font-weight: bold;">Search
						Query</h4>
				</div>
				<div class="row">
					<strong>Query: </strong>{{ search_query }}
				</div>
			</div>
			<div class="col-sm-3">
				<div class="row">
					<h4 style="color: {{ main_color_scheme }}; font-weight: bold;">Parameters</h4>
				</div>
				<div class="row">{{ parameters | raw }}</div>
			</div>
			<div class="col-sm-3">
				<div class="row">
					<h4 style="color: {{ main_color_scheme }}; font-weight: bold;">Statistics</h4>
				</div>
				<div class="row">
					<strong>Number of Proteins: </strong>{{ number_of_nodes }}
				</div>
				<div class="row">
					<strong>Number of Interactions: </strong>{{ number_of_edges }}
				</div>
			</div>
			<br class="clear" />
		</div>
	</div>
</div>
<div class="row network_row" style="background-color: #EEEEEE;">
	<div class="col-sm-12">
		<div id='cy'></div>
	</div>
</div>
<div class="shadow"></div>
<div class="row button_row">
	<div style="display: inline-block;">
		<ul class="nav nav-pills" style="margin: auto;">
			<li class="active pill"><a data-toggle="pill" href="#network"
				style="color: {{ main_color_scheme }}">Network</a></li>
			<li class="pill"><a data-toggle="pill" href="#downloads"
				style="color: {{ main_color_scheme }}">Downloads</a></li>
			<li class="pill"><a data-toggle="pill" href="#settings"
				style="color: {{ main_color_scheme }}">Settings</a></li>
		</ul>
	</div>
</div>
<div class="shadow"></div>
<div class="row result_row">

	<div class="tab-content" style="padding-top: 0;">

		<div id="network" class="tab-pane fade in active">
			<div class="container" style="overflow: auto;">
				<div class="row">
					<h3 class="bold" style="color: {{ main_color_scheme }}">Interactions</h3>
				</div>
				<div class="row">
					<div class="col-sm-8">
						<div class="input-group input-group-sm">
							<lable for="change-page-size">Page Size:</lable>
							<select id="change-page-size">
								<option value="2">2</option>
								<option value="3">3</option>
								<option value="5">5</option>
								<option value="10" selected>10</option>
							</select>
						</div>
					</div>
					<div class="col-sm-4">
						<input type="text" id="filter" placeholder="Search" />
					</div>
				</div>
				{% if interaction_array|length > 0 %}
				<table id="search_result_table" class="footable table"
					data-filter="#filter" data-filtering="true" data-filter-minimum="3">
					<thead>
						<tr>
							<th>Interactor A Gene Name</th>
							<th>Interactor B Gene Name</th>
							<th>Score</th>
							<th>Dataset</th>
						</tr>
					</thead>
					<tbody>

						{% for interaction in interaction_array %}
						<tr>
							<td><a class="interactor_qtip link">{{
									interaction.interactor_A_array.gene_name }}</a>
								<div class="hidden">
									<div class="container">
										<div class="row">
											<div class="col-sm-8">
												<h4>{{ interaction.interactor_A_array.gene_name }}</h4>
											</div>
										</div>
										<div class="col-sm-7">
											<div class="row">
												<h4>Description</h4>
											</div>
											<div class="row">
												<span class="more">{{
													interaction.interactor_A_array.description }}</span>
											</div>
										</div>
										<div class="col-sm-5">
											<div class="row">
												<h4>Links</h4>
											</div>
											<div class="row">
												{% for database,link_array in
												interaction.interactor_A_array.links %}
												<div class="row">{{ database }}</div>
												<div class="row">
													{% for links in link_array %} <a href="{{ links[1] }}"
														class='link' target="_blank">{{ links[0] }}</a> {% endfor %}
												</div>
												{% endfor %}
											</div>
										</div>
										<div class="row">
											<div class="col-sm-8">
												<div class="row">
													<h4>Actions</h4>
												</div>
												<div class="row">
													<a href="{{ interaction.interactor_B_array.name }}"
														target="_blank" class='link'>Search for {{
														interaction.interactor_B_array.gene_name }}</a>
												</div>
												<div class="row">
													<a
														href="../protein_sequence/{{ interaction.interactor_B_array.name }}"
														target="_blank" class='link'>Show protein sequence</a>
												</div>
											</div>
										</div>
									</div>
								</div></td>
							<td><a class="interactor_qtip  link">{{
									interaction.interactor_B_array.gene_name }}</a>
								<div class="hidden">
									<div class="container">
										<div class="row">
											<div class="col-sm-8">
												<h4>{{ interaction.interactor_B_array.gene_name }}</h4>
											</div>
										</div>
										<div class="col-sm-7">
											<div class="row">
												<h4>Description</h4>
											</div>
											<div class="row">
												<span class="more">{{
													interaction.interactor_B_array.description }}</span>
											</div>
										</div>
										<div class="col-sm-5">
											<div class="row">
												<h4>Links</h4>
											</div>
											<div class="row">
												{% for database,link_array in
												interaction.interactor_B_array.links %}
												<div class="row">{{ database }}</div>
												<div class="row">
													{% for links in link_array %} <a href="{{ links[1] }}"
														class='link' target="_blank" >{{ links[0] }}</a> {% endfor %}
												</div>
												{% endfor %}
											</div>
										</div>
										<div class="row">
											<div class="col-sm-8">
												<div class="row">
													<h4>Actions</h4>
												</div>
												<div class="row">
													<a
														href="{{ interaction.interactor_B_array.name }}"
														target="_blank" class='link'>Search for {{
														interaction.interactor_B_array.gene_name }}</a>
												</div>
												<div class="row">
													<a
														href="../protein_sequence/{{ interaction.interactor_B_array.name }}"
														target="_blank" class='link'>Show protein sequence</a>
												</div>
											</div>
										</div>
									</div>
								</div></td>
							<td>{{ interaction.score }}</td>
							<td>{% for dataset in interaction.dataset_array %} <a
								class="reference_qtip link"> {{ dataset.dataset_author }} </a>
								<div class="hidden">
									<a
										href="http://www.ncbi.nlm.nih.gov/pubmed/{{ dataset.dataset_reference }}"
										class='link' target="_blank">{{ dataset.dataset_author }}</a></br>
								</div> </br> {% endfor %}
							</td>
						</tr>
						{% endfor %}
					</tbody>
					<tfoot>
						<tr>
							<td colspan="5">
								<div class="pagination pagination-centered"></div>
							</td>
						</tr>
					</tfoot>
				</table>
				{% else %}
				<p>No Interactions Found</p>
				{% endif %}
			</div>
		</div>
		<div id="downloads" class="tab-pane fade">
			<div class="container">
				<div class="row">
					<h3 class="bold" style="color: {{ main_color_scheme }}">Downloads</h3>
				</div>
				<div class="row">
					<div class="col-sm-12">
						<div class="row">
							<div class="col-sm-12">
								<h4 class="bold" style="color: {{ main_color_scheme }}">Image</h4>
							</div>
						</div>
						<div class="row">
							<div class="row">
								<div class="col-sm-4">
									<h4>PNG:</h4>
								</div>
								<div class="col-sm-2">
									<a id='png' class="png" href="" download>Download</a>
								</div>
							</div>
							<div class="row">
								<div class="col-sm-4">
									<h4>JPG:</h4>
								</div>
								<div class="col-sm-2">
									<a id='jpg' class="jpg" href="" download>Download</a>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-12">
								<h4 class="bold" style="color: {{ main_color_scheme }}">Network
									Data</h4>
							</div>
						</div>
						<div class="row">
							<div class="row">
								<div class="col-sm-10">
									<h4>PSI-MI Tab 2.7:</h4>
								</div>
								<div class="col-sm-2">
									<a href="{{path('psi_mitab', {'search_term': search_query })}}" class='link'>Download</a>
								</div>
							</div>
							<div class="row">
								<div class="col-sm-10">
									<h4>CSV:</h4>
								</div>
								<div class="col-sm-2">
									<a href="{{path('csv', {'search_term': search_query })}}" class='link'>Download</a>
								</div>
							</div>
							<div class="row">
								<div class="col-sm-10">
									<h4>Protein Sequences in Multi-FASTA Format:</h4>
								</div>
								<div class="col-sm-2">
									<a
										href="{{path('multi_fasta', {'search_term': search_query })}}" class='link'>Download</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="settings" class="tab-pane fade">
			<div class="settings">
				<div class="container">
					<div class="row">
						<h3 class="bold" style="color: {{ main_color_scheme }}">Settings</h3>
					</div>
					<div class="row">
						<h4 style="color: {{ main_color_scheme }}">View Settings</h4>
					</div>
					<div class="row">
						<label for="view_settings_layout"> Layout </label>
						<select id="view_settings_layout">
							<option value="cose">Force-directed</option>
							<option value="concentric">Concentric</option>
							<option value="breadthfirst">Breadth-first</option>
							<option value="grid">Grid</option>
							<option value="circle">Circle</option>
						</select>
					</div>
					<div class="row">
						<button id="view_settings_submit" class="btn btn-success"
							style="margin-right: 10px;"">
							<span>Update</span>
						</button>
					</div>
					<div class="row">
						<button id="reset" class="btn btn-success"
							style="margin-right: 10px;"">
							<span>Reset</span>
						</button>
					</div>
					
					
						<div class="row hidden">
							<div class="col-sm-4">
								<label for="label_checkbox">Labels</label>
							</div>
							<div class="col-sm-4">
								<input class="styled" type="checkbox"
									name="view_settings_labels" id="view_settings_labels"
									checked="checked" />
							</div>
						</div>	
						<div class="col-sm-6 hidden">
							<form>
								<div class="row">
									<label for="min_interaction_score"> Minimum Required
										Interaction Score: </label>
								</div>
								<div class="row">
									<div id="min_interaction_score">
										<div id="min_interaction_score_handle"
											class="ui-slider-handle"></div>
									</div>
								</div>
								<div class="row">
									<label>Publication Status: </label>
								</div>
								<div class="row">
									<a id="update_data_settings" class="btn btn-success"
										style="margin-right: 10px;" href="" > <span>Update</span></a>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="shadow"></div>
</main>
<footer>
	<div class="row">{{ footer | raw }}</div>
</footer>
{% endblock %} {% block javascripts %} {{ tinymce_init() }} {%
javascripts 'bundles/fosjsrouting/js/router.js'
'assets/js/jquery-2.1.4.min.js' 'assets/js/jquery-ui.min.js'
'assets/js/bootstrap.min.js'
'bundles/footable/demos/js/bootstrap-tab.js'
'bundles/footable/demos/js/demos.js' 'bundles/footable/js/footable.js'
'bundles/footable/js/footable.paginate.js'
'bundles/footable/js/footable.filter.js' 'assets/js/cytoscape.min.js'
'assets/js/cytoscape-qtip.js' 'assets/js/jquery.qtip.js'
'bundles/spectrum/spectrum.js' 'assets/js/main.js'
'assets/js/search_results.js' %}
<script src="{{ asset_url }}"></script>
{% endjavascripts %}
<script
	src="{{ path('fos_js_routing_js', { callback: 'fos.Router.setData' }) }}"></script>


<script id="document_js">
    $(function(){    
    	var proteinOfIntrestName = '';
		var cy = cytoscape({	
			container: document.getElementById('cy'),
    	  	elements: 
          	{
    	     	nodes: [],      
    	     	edges: []
    	  	},
    	  	style: 
		  	[
    	  		{
    				selector: '.nodes',
    				css: 
    				{
                        'content': 'data(gene_name)',
                        'text-valign': 'center',
                        'color': 'white',
                        'text-outline-width': 2,
                        'padding-top': '10px',
                        'padding-left': '10px',
                        'padding-bottom': '10px',
                        'padding-right': '10px',
                        'text-align': 'center',
                        'background-color': '#55ACEE'
        			}
    			},
                {
                	selector: '.edge',
                	css: 
                    {
                	  'line-color' : '#AAAAAA'
                	}
                }
			]
		});
    
    	var result = {{ json | raw }};

    	var nodeArray = result.nodes;
    	var edgeArray = result.edges;

    	for (i = 0; i < nodeArray.length; ++i) {

    		var proteinId = nodeArray[i][0];
    		var proteinName = nodeArray[i][1];
    		var geneName = nodeArray[i][2];
    		var proteinDescription = nodeArray[i][3];
    		var linkArray = nodeArray[i][4];
    		var nodeProteinId = proteinId + "_" + proteinName;

    		cy.add([{ 
    			group: "nodes",
    			data: { id: nodeProteinId, protein_name: proteinName, gene_name: geneName, description: proteinDescription, external_links: linkArray },
    			classes: "nodes"
    			
    		}]);
    		
    	}	

    	
    	for (i = 0; i <  edgeArray.length; ++i) {
        	
    		var sourceProteinId = edgeArray[i][0];
    		var sourceProteinName = edgeArray[i][1];
    		var targetProteinId = edgeArray[i][2];
    		var targetProteinName = edgeArray[i][3];
    		var scoreData = edgeArray[i][4];
    		var sourceNodeId = sourceProteinId + "_" + sourceProteinName;
    		var targetNodeId = targetProteinId + "_" + targetProteinName;
    		var edgeID = sourceProteinId + "_" + sourceProteinName + "_" + targetProteinId + "_" + targetProteinName;
        	var widthData = 1;
    		if (scoreData <= 0.20){
    			widthData = 2;
    		}else if(scoreData <= 0.40 && scoreData > 0.20){
    			widthData = 3;
    		}else if(scoreData <= 0.60 && scoreData > 0.40){
    			widthData = 4;
    		}else if(scoreData <= 0.80 && scoreData > 0.60){
    			widthData = 5;
    		}else if(scoreData <= 1 && scoreData > 0.80){
    			widthData = 6;
    		}
    		
    		cy.add([{ 
        		group: "edges",
        		data: { 
        			id: edgeID, 
        			source: sourceNodeId, 
        			target: targetNodeId, 
        			interaction: sourceProteinName + '-' + targetProteinName,
        			score: scoreData,
        			} 
        	}]).css({ 'width': widthData });
    		
    	}

    	cy.center();
    	
    	cy.layout({ 
    		name: 'cose',
    		avoidOverlap: true,
    		equidistant: true,
    		minNodeSpacing: 50,
    	});

    	cy.minZoom(0.2);
    	cy.maxZoom(8);
    	

    	$('#view_settings_submit').on("click", function(){
    	    
    		layoutType = $('#view_settings_layout').val();
    
    		
    		cy.layout({ 
    			name: layoutType,
    			avoidOverlap: true,
    			equidistant: true,
    			minNodeSpacing: 50,
    			
    		}); 
    		cy.style().selector('$node').style({'content': 'data(gene_name)'}).update();
    
    		if($("#view_settings_labels").is(':checked')){
    			cy.style().selector('$node').style({'content': 'data(gene_name)'}).update();
    
    		}else{
    
    			cy.style().selector('$node').style({'content': ''}).update();
    		}
    
    	});

    	$('#reset').on("click", function(){

    		cy.reset();
    	});

    	

    	cy.$('.nodes').qtip({
    		content: function(){ 
    			var proteinName = this.data('protein_name');
    			var searchTerm = this.data('search_term');
    			var geneName = this.data('gene_name');
    			var proteinDescription = this.data('description');
    			var linkArray = this.data('external_links');
    			var returnLinks = '<div class="row">';

    			$.each(linkArray, function(database, links) {

    				returnLinks += '<div class="row">' + database + '</div>';
    				returnLinks += '<div class="row">';
    				for (i = 0; i < links.length; ++i) {
    					link_id = links[i][0];
    					link = links[i][1];
						returnLinks += '<a href="' + link + '" target="_blank">' + link_id + '</a> ';
					}
					returnLinks += '</div>';
    			});
    			
    			returnLinks += '</div>';			
    			
    			return '<div class="container"><div class="row"><div class="col-sm-8"><h4>' + geneName + '</h4></div></div><div class="col-sm-7"><div class="row"><h4>Description</h4></div><div class="row"><span class="more">' + proteinDescription + '</span></div></div><div class="col-sm-5"><div class="row"><h4>Links</h4></div>' + returnLinks + '</div><div class="row"><div class="col-sm-8"><div class="row"><h4>Actions</h4></div><div class="row"><a href="' + Routing.generate('search_results', { search_term: proteinName }) + '" target="_blank">Search for ' + geneName + '</a></div><div class="row"><a href="' + Routing.generate('protein_sequence', { search_term: proteinName }) + '"  target="_blank">Show protein sequence</a></div></div></div></div><script>$(document).ready(function() {var showChar = 300;var ellipsestext = "...";var moretext = "Read More";var lesstext = "Show less";$(".more").each(function() {var content = $(this).html();if(content.length > showChar) {var c = content.substr(0, showChar);var h = content.substr(showChar, content.length - showChar);var html = c + \'<span class="moreellipses">\' + ellipsestext + \'&nbsp;</span><span class="morecontent"><span>\' + h + \'</span>&nbsp;&nbsp;<a href="" class="morelink">Read More</a></span>\';$(this).html(html);}});$(".morelink").on("click", function(){if($(this).hasClass("less")) {$(this).removeClass("less");$(this).html(moretext);} else {$(this).addClass("less");$(this).html(lesstext);}$(this).parent().prev().toggle();$(this).prev().toggle();return false;});});</' + 'script>';
    				
    		},
    		position: {
    			my: 'top center',
    			at: 'bottom center'
    		},
    		style: {
    			classes: 'qtip-bootstrap',
    			tip: {
    				width: 16,
    				height: 8
    			}
    		},
    	});

    	cy.edges().qtip({
    		content: function(){ 
    			return 'Interaction: ' + 
    			this.data('interaction') + 
    			'<br/>' + 
    			'Score: ' +
    			 this.data('score') +
    			 '<br/>' 
    
    
    			 ; 
    		},
    		position: {
    			my: 'top center',
    			at: 'bottom center'
    		},
    		style: {
    			classes: 'qtip-bootstrap',
    			tip: {
    				width: 16,
    				height: 8
    			}
    		}
    	});

    	
    	$('#png').on('click', function(){
    		var png64 = cy.png({bg: '#ffffff'});
    		$('#png').attr('href', png64);
    	});
    
    	$('#jpg').on('click', function(){
    		var jpg = cy.jpg();
    		$('#jpg').attr('href', jpg);
    	});
    	
    
    });
    $( function() {
        $( "#min_interaction_score" ).slider({
    
    		step: 0.01,
            min: 0,
            max: 1,
            value: 0,
            slide: function( event, ui ) {
              $("#min_interaction_score_handle").html(ui.value);
            }
          });
        $("#min_interaction_score_handle").html($( "#min_interaction_score" ).slider( "value" ));
      });
    
    $(function () {
        $('table').footable();
    	$('#change-page-size').change(function (e) {
    		e.preventDefault();
    		var pageSize = $(this).val();
    		$('.footable').data('page-size', pageSize);
    		$('.footable').trigger('footable_initialized');
    	});
    
    
      });


    $('.interactor_qtip').each(function() { // Notice the .each() loop, discussed below
        $(this).qtip({
            content: {
                text: $(this).next('div').html() // Use the "div" element next to this for the content
            },
    		position: {
    			my: 'left center',
    			at: 'right center'
    		},
    		style: {
    			classes: 'qtip-bootstrap',
    			tip: {
    				width: 16,
    				height: 8
    			}
    		},
            show: 'click',
            hide: 'unfocus'
        });
    });
    $('.reference_qtip').each(function() { // Notice the .each() loop, discussed below
        $(this).qtip({
            content: {
                text: $(this).next('div').html() // Use the "div" element next to this for the content
            },
    		position: {
    			my: 'right center',
    			at: 'left center'
    		},
    		style: {
    			classes: 'qtip-bootstrap',
    			tip: {
    				width: 16,
    				height: 8
    			}
    		},
            show: 'click',
            hide: 'unfocus'
        });
    });
    	</script>
{% endblock %}
