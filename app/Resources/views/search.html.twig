{% extends 'base.html.twig' %} 
{% block stylesheets %}
<link rel="stylesheet" href="{{ asset('assets/css/bootstrap.min.css') }}">
<link rel="stylesheet" href="{{ asset('assets/css/jquery-ui.min.css') }}">
<link rel="stylesheet" href="{{ asset('assets/css/jquery.qtip.css') }}">
<link rel="stylesheet" href="{{ asset('assets/css/main.css') }}">
<link rel="stylesheet" href="{{ asset('assets/css/search.css') }}">
{% endblock %}
{% block title %}{{ short_title }} | Search{% endblock %}
{% block content %}
<header>
	<nav class="navbar navbar-default main_header" style="background-color: {{ main_color_scheme }};">
		<svg id="svg2" class="main_logo left " xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" height="40.026" width="69.124" version="1.1" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/">
            <metadata id="metadata7">
              <rdf:RDF>
               <cc:Work rdf:about="">
                <dc:format>image/svg+xml</dc:format>
                <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
                <dc:title/>
               </cc:Work>
              </rdf:RDF>
             </metadata>
             <g id="g3770" stroke-miterlimit="4" stroke-dasharray="none">
              <path id="path2987" d="m48.576,17.582c0,9.2489-7.5012,16.746-16.754,16.746-9.2532,0-16.754-7.4977-16.754-16.746,0-9.2489,7.5012-16.746,16.754-16.746,9.2532,0,16.754,7.4977,16.754,16.746z" stroke-opacity="0.56084655000000005" class="parent" stroke="#000000" stroke-width="0.04307067000000000" fill="#e6e6e6"/>
              <path id="path2991-1" d="m31.367,23.78c0,2.992-2.4267,5.4175-5.42,5.4175-2.9934,0-5.42-2.4255-5.42-5.4175s2.4267-5.4175,5.42-5.4175c2.9934,0,5.42,2.4255,5.42,5.4175z" class="child" stroke="{{ logo_color_scheme }}" stroke-width="0.08252774" fill="{{ logo_color_scheme }}"/>
              <path id="path2991-7" d="m42.899,13.341c0,2.992-2.4267,5.4175-5.42,5.4175-2.9934,0-5.42-2.4255-5.42-5.4175s2.4267-5.4175,5.42-5.4175c2.9934,0,5.42,2.4255,5.42,5.4175z" class="child" stroke="{{ logo_color_scheme }}" stroke-width="0.08252774" fill="{{ logo_color_scheme }}"/>
              <path id="path2991-4" d="m67.986,29.163c0,2.992-2.4267,5.4175-5.42,5.4175-2.9934,0-5.42-2.4255-5.42-5.4175s2.4267-5.4175,5.42-5.4175c2.9934,0,5.42,2.4255,5.42,5.4175z" class="child" stroke="{{ logo_color_scheme }}" stroke-width="0.08252774" fill="{{ logo_color_scheme }}"/>
              <path id="path2991-0" d="m10.903,34.545c0,2.992-2.4267,5.4175-5.42,5.4175-2.9934,0-5.42-2.4255-5.42-5.4175s2.4267-5.4175,5.42-5.4175c2.9934,0,5.42,2.4255,5.42,5.4175z" class="child" stroke="{{ logo_color_scheme }}" stroke-width="0.08252774" fill="{{ logo_color_scheme }}"/>
              <path id="path3807" stroke-linejoin="miter" d="m25.95,23.82-20.47,10.76" class="child" stroke="{{ logo_color_scheme }}" stroke-linecap="butt" stroke-width="1.07676673" fill="none"/>
              <path id="path2991-9-45" d="m69.063,5.4793c0,2.992-2.4267,5.4175-5.42,5.4175-2.9934,0-5.42-2.4255-5.42-5.4175s2.4267-5.4175,5.42-5.4175c2.9934,0,5.42,2.4255,5.42,5.4175z" class="child" stroke="{{ logo_color_scheme }}" stroke-width="0.08252774" fill="{{ logo_color_scheme }}"/>
              <path id="path3807-1" stroke-linejoin="miter" d="m63.64,5.5195-25.848,7.5356" class="child" stroke="{{ logo_color_scheme }}" stroke-linecap="butt" stroke-width="1.07676673" fill="none"/>
              <path id="path3807-1-5" stroke-linejoin="miter" d="m62.56,29.2-24.77-16.15" class="child" stroke="{{ logo_color_scheme }}" stroke-linecap="butt" stroke-width="1.07676673" fill="none"/>
             </g>
        </svg>
		<div style="padding: 12px;">
			<h3 style="color: {{ header_color_scheme }}">
				<strong>{{ title }}</strong>
			</h3>
		</div>
	</nav>
	<nav class="navbar navbar-default">
		<div class="container-fluid">
			<div class="navbar-header tor_ibin_header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span> 
					<span class="icon-bar"></span>
				</button>
			</div>
			<div id="myNavbar" class="collapse navbar-collapse">
    		    {% if login_status == false %}
    		    	<h5 class="nav-header" style="color: {{ main_color_scheme }}">{{ short_title }}</h5>
    				<ul class="nav navbar-nav ">
    					<li><a href="{{ path('home') }}">Home</a></li>
    					<li class="active"><a href="{{ path('search') }}">Search</a></li>
    					<li><a href="{{ path('download') }}">Downloads</a></li>
    					<li><a href="{{ path('about') }}">About</a></li>
    					<li><a href="{{ path('documentation') }}">Documentation</a></li>
    				</ul>
    				<ul class="nav navbar-nav navbar-right">
    					<li><a href="{{ path('fos_user_security_login') }}">Login</a></li>
    				</ul>
    			{% elseif login_status == true %}
    				<h5 class="nav-header" style="color: {{ main_color_scheme }}">{{ short_title }} Admin</h5>
    				<ul class="nav navbar-nav ">
    					<li><a href="{{ path('admin_home') }}">Home</a></li>
    					<li class="active"><a href="{{ path('admin_search') }}">Search</a></li>
    					<li><a href="{{ path('admin_download') }}">Downloads</a></li>
    					<li><a href="{{ path('admin_about') }}">About</a></li>
    					<li><a href="{{ path('admin_documentation') }}">Documentation</a></li>
    					<li><a href="{{ path('announcement_manager') }}">Announcements</a></li>
    					<li><a href="{{ path('data_manager') }}">Data</a></li>
    					<li><a href="{{ path('file_manager', {'upload_directory': 'FASTA'}) }}">Files</a></li>
    					<li><a href="{{ path('admin_settings') }}">Settings</a></li>
    				</ul>
    				<ul class="nav navbar-nav navbar-right">
    					<li><a href="{{ path('user_logout') }}">Logout</a></li>
    				</ul>
    			{% endif %}
			</div>
		</div>
		<div class="shadow"></div>
	</nav>
</header>
<main>
    <div class="row" style="background-color: #EEEEEE;">

    		<div class="search_inner_panel" >
    			<div class="row search_header" style="background: {{ main_color_scheme }}">
    				<h4 style="color: {{ header_color_scheme }}">
    					<strong>Search {{ short_title }}</strong>
    				</h4>
    			</div>
    			<div class="row search_content  search_panel"
    				style="background-color: #FFFFFF">
    				<div class="col-sm-12">
    					{{ form_start(form) }}
    					<div class="row" style='width: 84%; margin: 20px;'>
    						<div class="col-sm-7">
    							<div class="row">
    								<h4>{{ form_label(form.identifier) }}</h4>
    							</div>
    						</div>
    						<div class="col-sm-5">
    							<p>Examples:
    							<a href='#' class='string_example example_small' onclick='$("#search_identifier").val("{{ example_3 }}");'>#1</a>
    							<a href='#' class='string_example example_small' onclick='$("#search_identifier").val("{{ example_2 }}");'>#2</a>
        						<a href='#' class='string_example example_small' onclick='$("#search_identifier").val("{{ example_1 }}");'>#3</a> 
								</p>
    						</div>
    					</div>
    					<div class="row" style='margin: 20px;'>
    						<div class="input-group input-group-sm">
    							{{ form_widget(form.identifier) }} <span class="input-group-btn">
    								<button type="submit" class="btn btn-success" type="button" id="search_btn" style="background: {{ button_color_scheme }}">Search</button>
    							</span>
    						</div>
    					</div>
    					
						
						
    					<div class="col-sm-6">
					    	<div class="row" style='margin: 20px;'>
								<h4><strong>Filter Interactions</strong></h4>
							</div>
								<div class="row"  style='margin-left: 20px;'>
									<div class="col-sm-10" style='padding-left: 0px;'>
    									<div>{{ form_widget(form.query_query) }}</div>
    								</div>
    								<div class="col-sm-2">
    									<img class='help_query' src='{{ asset("assets/images/help.png")}}' width="16px" height="16px"/>
										<div class="hidden">
											Only show interactions among query proteins.
                                        </div>
    								</div>
								</div>
							
        					<div class="row hidden" style='margin: 20px;'>
    							<h4>{{ form_label(form.min_interaction_score) }}</h4>
    						</div>
    						<div class="row hidden" style='margin: 20px;'>
    							<div class="input-group input-group-sm">
    								<div id="min_interaction_score">
    									<div id="min_interaction_score_handle" class="ui-slider-handle"></div>
    								</div>
    								{{ form_widget(form.min_interaction_score) }}
    							</div>
    						</div>
    					
    					</div>
    					<div class="col-sm-6">
    						    <div class="row" style='margin: 20px;'>
    								<h4><label>Interaction Status</label></h4>
    							</div>
    							<div class="row" style='margin: 20px;'>
    								<div class="row">
        								<div class="col-sm-7">
        								    {{ form_widget(form.published) }}<h4>{{ form_label(form.published) }}</h4>
    									</div>
    									<div class="col-sm-2">
    										<img class='help_query' src='{{ asset("assets/images/help.png")}}' width="16px" height="16px"/>
    										<div class="hidden">Published: Include all interactions from datasets that are published with an associated publication.</div>
    									</div>
    								</div>
    								<div class="row">
        								<div class="col-sm-7">
        								    {{ form_widget(form.validated) }}<h4>{{ form_label(form.validated) }}</h4>
    									</div>
    									<div class="col-sm-2">
    										<img class='help_query' src='{{ asset("assets/images/help.png")}}' width="16px" height="16px"/>
    										<div class="hidden">Validated: Include all interactions that are not yet published but that originate from datasets that
    										 have been validated by successfully testing a representative subset of these interactions in at least one orthogonal 
    										 binary interaction detection assay.</div>
    									</div>
    								</div>
    								<div class="row">
        								<div class="col-sm-7">
        								    {{ form_widget(form.verified) }}<h4>{{ form_label(form.verified) }}</h4>
    									</div>
    									<div class="col-sm-2">
    										<img class='help_query' src='{{ asset("assets/images/help.png")}}' width="16px" height="16px"/>
    										<div class="hidden">Verified: Include all interactions that are neither published nor validated but that were identified
    										 in pooled Y2H screens, tested positive in Y2H pairwise test and sequence confirmed.</div>
    									</div>
    								</div>
    								<div class="row">
        								<div class="col-sm-7">
        								    {{ form_widget(form.literature) }}<h4>{{ form_label(form.literature) }}</h4>
    									</div>
    									<div class="col-sm-2">
    										<img class='help_query' src='{{ asset("assets/images/help.png")}}' width="16px" height="16px"/>
    										<div class="hidden">Literature: Include interactions that were curated from small-scale studies with at least two
    										 experimental evidences of which at least one stems from a binary interaction detection assay.</div>
    									</div>
    								</div>
    							</div>
    					</div>
    				</div>
    				{{ form_end(form) }}
    			</div>
    		</div>

    </div>
</main>
<footer>
	<div class="shadow"></div>
	{{ footer | raw }}
</footer>
{% endblock %} 
{% block javascripts %}
    <script src="{{ asset('assets/js/jquery-2.1.4.min.js') }}"></script>
    <script src="{{ asset('assets/js/jquery-ui.min.js') }}"></script>
    <script src="{{ asset('assets/js/bootstrap.min.js') }}"></script>
    <script src="{{ asset('assets/js/jquery.qtip.js') }}"></script>
    <script src="{{ asset('assets/js/main.js') }}"></script>
    <script src="{{ asset('assets/js/search.js') }}"></script>
    <script>
        $(function() {

    	   $('.help_query').each(function() { // Notice the .each() loop, discussed below
    	        $(this).qtip({
    	            content: {
    	                text: $(this).next('div').html()
    	            },
    	    		position: {
    	    			my: 'left center',
    	    			at: 'right center'
    	    		},
    	    		style: {
    	    			classes: 'qtip-bootstrap',
    	    			tip: {
    	    				width: 10,
    	    				height: 8
    	    			}
    	    		},
    	            show: 'click',
    	            hide: 'unfocus'
    	        });
    	    });


        	
            $( "#min_interaction_score" ).slider({
        
        		step: 0.01,
                min: 0,
                max: 1,
                value: 0,
                change:function( event, ui ) {
                  $("#search_min_interaction_score").val(ui.value);
                },
                slide: function( event, ui ) {
                  $("#min_interaction_score_handle").html(ui.value);
                }
              });
            
            $("#min_interaction_score_handle").html($( "#min_interaction_score" ).slider( "value" ));
        
        	
        	$("#form_identifier").autocomplete({
        		source: function(request, response){
        
        			url = 'http://localhost/php_eclipse_workspace/openPIP/web/app.php/search/autocomplete/' + request.term;
        			
        
        			$.getJSON(url, function(data){
        				response(data);
        			});
        		},
        		minLength: 2,
        	});
        	
        	
        });
    
    </script>
{% endblock %}
